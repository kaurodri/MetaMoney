<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>MetaMoney</title>
    <link rel="sortcut icon" href="banco-imagens/favicon-32x32.png" type="image/x-icon" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="styles/main.css" rel="stylesheet">
    <script src="index.js" defer></script>
</head>

<body>
    <div class="center">
        <div class="box1">

            <div class="inpu">
                <input type="text" id="item" name="item"><br>
                <button onclick="addItem()">Adicionar item</button>
            </div>
            <div class="boxtext">
                <ul id="itemList"></ul>
            </div>

        </div>

        <div class="box2">

            <div>
                <input type="number" id="entrada" name="entrada" value="200" onchange="updateComparacao()"><br>
            </div>

            <div class="boxmeta">
                <ul id="comparacao"></ul>
            </div>

            <div class="boxmeta">
                <ul id="carrinho"></ul>
            </div>

        </div>

        <script>
            var items = [];
            function addItem() {
                var itemInput = document.getElementById('item').value.split(':');
                var itemName = itemInput[0].trim();
                var itemValue = parseFloat(itemInput[1]);
                items.push({ name: itemName, value: itemValue });
                var li = document.createElement('li');
                li.appendChild(document.createTextNode(itemName + ' : ' + itemValue));
                li.addEventListener('click', function () {
                    var index = items.findIndex(function (item) {
                        return item.name === itemName && item.value === itemValue;
                    });
                    items.splice(index, 1);
                    this.parentNode.removeChild(this);
                    updateComparacao();
                });
                document.getElementById('itemList').appendChild(li);
                updateComparacao();
            }
            function updateComparacao() {
                var entrada = parseFloat(document.getElementById('entrada').value);
                document.getElementById('comparacao').innerHTML = '';
                items.forEach(function (item) {
                    var li = document.createElement('li');
                    li.appendChild(document.createTextNode(item.name + ' x ' + Math.floor(entrada / item.value)));
                    li.addEventListener('click', function () {
                        if (entrada - item.value >= 0) {
                            entrada -= item.value;
                            var liCarrinho = document.createElement('li');
                            liCarrinho.appendChild(document.createTextNode(item.name + ' : ' + item.value));
                            liCarrinho.addEventListener('click', function () {
                                entrada += item.value;
                                document.getElementById('entrada').value = entrada;
                                this.parentNode.removeChild(this);
                                updateComparacao();
                            });
                            document.getElementById('carrinho').appendChild(liCarrinho);
                            document.getElementById('entrada').value = entrada;
                            updateComparacao();
                        }
                    });
                    document.getElementById('comparacao').appendChild(li);
                });
                var totalValue = items.reduce(function (total, item) {
                    return total + item.value;
                }, 0);
                document.getElementById('diferenca').innerHTML = 'Diferen√ßa: ' + (entrada - totalValue);
            }
        </script>
    </div>
</body>